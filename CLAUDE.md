Главное праивло - никогда не врать мне, если что то не известно - так и говорить
Нужно добатвь коментарии и кода (небольшие, но понятные)
При необходимости всегда используй web search
Не создавай версии проекта и упоминание версирования
Всегда актуализируй докуметацию из [text](docs/doc.md)

Главные технолоии (Все зависимости долдны быть максимальных версий)
PostgreSQL - основная БД для очередей и хранения данных
Avito Library - специализированная библиотека для парсинга (на базе Playwright)
Docker - контейнеризация воркеров
Docker Compose - оркестрация контейнеров


Avito Parser System
Описание
Автоматизированная система для парсинга объявлений с Авито по артикулам с многоуровневой валидацией и распределенной обработкой через независимые воркеры.
Основные возможности

Массовый парсинг объявлений по списку артикулов
Двухуровневая валидация (механическая + ИИ)
Автоматическое определение неоригинальных товаров
Ценовой анализ и фильтрация подозрительных предложений
Сохранение детальной информации о каждом объявлении
Автоматическое решение капчи
Работа через прокси с автоматической ротацией

Архитектура системы
Компоненты

Локальные скрипты - управление задачами, прокси, мониторинг
Контейнеризированные воркеры - выполнение парсинга на серверах
PostgreSQL БД - централизованное хранилище данных и очередь задач
Avito Library - основной инструмент взаимодействия с сайтом

Принцип работы

Локальные скрипты загружают артикулы и прокси в БД
Воркеры асинхронно берут задачи из очереди
Каждый воркер независимо обрабатывает свои задачи
Результаты сохраняются в БД с полной историей валидации

Обязательные требования
Технические требования

ОБЯЗАТЕЛЬНО использовать Avito Library для всех операций с сайтом
ОБЯЗАТЕЛЬНО максимально долгое переиспользование браузерной страницы
ОБЯЗАТЕЛЬНО независимая работа воркеров без взаимной блокировки
ОБЯЗАТЕЛЬНО атомарное взятие задач и прокси из БД
ОБЯЗАТЕЛЬНО heartbeat механизм для отслеживания живых воркеров
ОБЯЗАТЕЛЬНО вызов детектора после каждого перехода на страницу
ОБЯЗАТЕЛЬНО испоьзуем headless = false
ОБЯЗАТЕЛЬНО проект сотсоит из двух папок, container и scripts

Требования к валидации

Механическая проверка на стоп-слова (б/у, аналог, не оригинал)
Ценовой фильтр: отсечение объявлений дешевле 50% от топ-20%
ИИ-валидация всех прошедших механическую проверку
Сохранение результатов валидации в JSON для аудита

Ограничения системы

НЕ поддерживается частичный парсинг каталога
НЕ поддерживается параллельный парсинг одного артикула
НЕ восстанавливаются заблокированные прокси
НЕ используется батчевая обработка для ИИ-валидации

Принципы разработки
KISS (Keep It Simple, Stupid)

Простая архитектура без лишних абстракций
Прямое подключение к БД без API-слоев
Минимум внешних зависимостей
Один воркер = одна задача = один прокси
Случайный выбор прокси вместо сложных алгоритмов

Отказоустойчивость

Автоматический перезапуск упавших воркеров
Возврат зависших задач в очередь через час
Независимая работа воркеров
Сохранение промежуточных результатов